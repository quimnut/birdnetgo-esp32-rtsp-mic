; PlatformIO Configuration for ESP32 RTSP Mic for BirdNET-Go
; Multi-platform support: ESP32, ESP32-C6, ESP32-S3
;
; Usage:
;   pio run -e esp32c6        # Build for XIAO ESP32-C6 (default)
;   pio run -e esp32dev       # Build for ESP-WROOM-32 / DevKitC
;   pio run -e esp32s3        # Build for ESP32-S3 DevKitC
;   pio run -e nodemcu32s     # Build for NodeMCU-32S
;   pio run -t upload         # Upload to connected board
;   pio run -t monitor        # Serial monitor
;
; The firmware auto-detects the platform and configures I2S pins accordingly.
; See AGENTS.md for detailed wiring instructions per platform.

[platformio]
default_envs = xiao_esp32s3_sense
src_dir = esp32_rtsp_mic_birdnetgo
include_dir = esp32_rtsp_mic_birdnetgo

; ============================================================
; Common settings shared across all environments
; ============================================================
[common]
framework = arduino
monitor_speed = 115200
upload_speed = 921600
lib_deps = 
    tzapu/WiFiManager@^2.0.17-beta
build_flags = 
    -D CORE_DEBUG_LEVEL=1
    -D ARDUINO_USB_MODE=1

; ============================================================
; ESP32-C6 (Seeed XIAO ESP32-C6) - Primary target
; ============================================================
[env:esp32c6]
platform = espressif32
board = seeed_xiao_esp32c6
framework = ${common.framework}
monitor_speed = ${common.monitor_speed}
upload_speed = ${common.upload_speed}
lib_deps = ${common.lib_deps}
build_flags = 
    ${common.build_flags}
    -D CONFIG_IDF_TARGET_ESP32C6=1

; ============================================================
; ESP32 Classic (ESP-WROOM-32 / DevKitC)
; ============================================================
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = ${common.framework}
monitor_speed = ${common.monitor_speed}
upload_speed = ${common.upload_speed}
lib_deps = ${common.lib_deps}
build_flags = 
    ${common.build_flags}
    -D CONFIG_IDF_TARGET_ESP32=1

; ============================================================
; NodeMCU-32S (ESP32 with specific pinout)
; ============================================================
[env:nodemcu32s]
platform = espressif32
board = nodemcu-32s
framework = ${common.framework}
monitor_speed = ${common.monitor_speed}
upload_speed = ${common.upload_speed}
lib_deps = ${common.lib_deps}
build_flags = 
    ${common.build_flags}
    -D CONFIG_IDF_TARGET_ESP32=1

; ============================================================
; ESP32-S3 DevKitC (N8R8 or N16R8)
; ============================================================
[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = ${common.framework}
monitor_speed = ${common.monitor_speed}
upload_speed = ${common.upload_speed}
lib_deps = ${common.lib_deps}
build_flags = 
    ${common.build_flags}
    -D CONFIG_IDF_TARGET_ESP32S3=1
    -D ARDUINO_USB_CDC_ON_BOOT=1

; ============================================================
; Seeed XIAO ESP32-S3
; ============================================================
[env:xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = ${common.framework}
monitor_speed = ${common.monitor_speed}
upload_speed = ${common.upload_speed}
lib_deps = ${common.lib_deps}
build_flags = 
    ${common.build_flags}
    -D CONFIG_IDF_TARGET_ESP32S3=1
    -D ARDUINO_USB_CDC_ON_BOOT=1

; ============================================================
; Seeed XIAO ESP32-S3 Sense (Built-in PDM microphone)
; No external wiring needed - uses onboard MSM261S4030H0 PDM mic
; ============================================================
[env:xiao_esp32s3_sense]
platform = espressif32
board = seeed_xiao_esp32s3
framework = ${common.framework}
monitor_speed = ${common.monitor_speed}
upload_speed = ${common.upload_speed}
lib_deps = ${common.lib_deps}
build_flags = 
    ${common.build_flags}
    -D CONFIG_IDF_TARGET_ESP32S3=1
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D MIC_TYPE_PDM
